{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar actions_1 = require(\"../../actions\");\n\nvar type_validate_1 = require(\"../type-validate\");\n\nvar utils_1 = require(\"../utils\");\n\nvar link_1 = require(\"./link\");\n\nvar linkOptionsValidator = type_validate_1.matchesObject({\n  id: type_validate_1.matchesString(),\n  options: link_1.linkPropsSchema\n});\n\nfunction activeLinkError(value) {\n  return [{\n    error: 'invalid_active_item',\n    value: value,\n    message: 'expected active item to exist in menu items'\n  }];\n}\n\nfunction getOptionsSchema(options) {\n  var baseSchema = type_validate_1.matchesObject({\n    items: type_validate_1.makeOptional(type_validate_1.matchesArray(linkOptionsValidator)),\n    active: type_validate_1.makeOptional(linkOptionsValidator)\n  });\n  var items = options.items,\n      active = options.active;\n\n  if (items && active) {\n    var activeItemSchema = type_validate_1.matchesObject({\n      active: type_validate_1.composeSchemas(linkOptionsValidator, function (value) {\n        return items.find(function (item) {\n          return item.id === value.id;\n        }) ? undefined : activeLinkError(value);\n      })\n    });\n    return type_validate_1.composeSchemas(baseSchema, activeItemSchema);\n  }\n\n  return baseSchema;\n}\n\nfunction getPayloadSchema(payload) {\n  var baseSchema = type_validate_1.matchesObject({\n    items: type_validate_1.makeOptional(type_validate_1.matchesArray(link_1.linkActionSchema)),\n    active: type_validate_1.makeOptional(type_validate_1.matchesString())\n  });\n  var items = payload.items,\n      active = payload.active;\n\n  if (items && active) {\n    var activeItemSchema = type_validate_1.matchesObject({\n      active: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) {\n        return items.find(function (item) {\n          return item.id === value;\n        }) ? undefined : activeLinkError(value);\n      })\n    });\n    return type_validate_1.composeSchemas(baseSchema, activeItemSchema);\n  }\n\n  return baseSchema;\n}\n\nfunction validateProps(props) {\n  var result = type_validate_1.validate(props, getOptionsSchema(props));\n  return result;\n}\n\nexports.validateProps = validateProps;\n\nfunction validateAction(action) {\n  var actionType = actions_1.NavigationMenu.ActionType;\n\n  if (action.type === actions_1.ChannelMenu.ActionType.LINK_UPDATE || action.type === actions_1.ChannelMenu.ActionType.UPDATE) {\n    actionType = actions_1.ChannelMenu.ActionType;\n  }\n\n  return type_validate_1.validate(action, utils_1.createActionValidator(actionType, getPayloadSchema(action.payload), true, false));\n}\n\nexports.validateAction = validateAction;","map":{"version":3,"sources":["/home/alex/Documents/Work/ccfe/frontend/node_modules/@shopify/app-bridge/validate/actions/menu.js"],"names":["Object","defineProperty","exports","value","actions_1","require","type_validate_1","utils_1","link_1","linkOptionsValidator","matchesObject","id","matchesString","options","linkPropsSchema","activeLinkError","error","message","getOptionsSchema","baseSchema","items","makeOptional","matchesArray","active","activeItemSchema","composeSchemas","find","item","undefined","getPayloadSchema","payload","linkActionSchema","validateProps","props","result","validate","validateAction","action","actionType","NavigationMenu","ActionType","type","ChannelMenu","LINK_UPDATE","UPDATE","createActionValidator"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar actions_1 = require(\"../../actions\");\nvar type_validate_1 = require(\"../type-validate\");\nvar utils_1 = require(\"../utils\");\nvar link_1 = require(\"./link\");\nvar linkOptionsValidator = type_validate_1.matchesObject({ id: type_validate_1.matchesString(), options: link_1.linkPropsSchema });\nfunction activeLinkError(value) {\n    return [\n        {\n            error: 'invalid_active_item',\n            value: value,\n            message: 'expected active item to exist in menu items',\n        },\n    ];\n}\nfunction getOptionsSchema(options) {\n    var baseSchema = type_validate_1.matchesObject({\n        items: type_validate_1.makeOptional(type_validate_1.matchesArray(linkOptionsValidator)),\n        active: type_validate_1.makeOptional(linkOptionsValidator),\n    });\n    var items = options.items, active = options.active;\n    if (items && active) {\n        var activeItemSchema = type_validate_1.matchesObject({\n            active: type_validate_1.composeSchemas(linkOptionsValidator, function (value) {\n                return items.find(function (item) { return item.id === value.id; }) ? undefined : activeLinkError(value);\n            }),\n        });\n        return type_validate_1.composeSchemas(baseSchema, activeItemSchema);\n    }\n    return baseSchema;\n}\nfunction getPayloadSchema(payload) {\n    var baseSchema = type_validate_1.matchesObject({\n        items: type_validate_1.makeOptional(type_validate_1.matchesArray(link_1.linkActionSchema)),\n        active: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    });\n    var items = payload.items, active = payload.active;\n    if (items && active) {\n        var activeItemSchema = type_validate_1.matchesObject({\n            active: type_validate_1.composeSchemas(type_validate_1.matchesString(), function (value) {\n                return items.find(function (item) { return item.id === value; })\n                    ? undefined\n                    : activeLinkError(value);\n            }),\n        });\n        return type_validate_1.composeSchemas(baseSchema, activeItemSchema);\n    }\n    return baseSchema;\n}\nfunction validateProps(props) {\n    var result = type_validate_1.validate(props, getOptionsSchema(props));\n    return result;\n}\nexports.validateProps = validateProps;\nfunction validateAction(action) {\n    var actionType = actions_1.NavigationMenu.ActionType;\n    if (action.type === actions_1.ChannelMenu.ActionType.LINK_UPDATE ||\n        action.type === actions_1.ChannelMenu.ActionType.UPDATE) {\n        actionType = actions_1.ChannelMenu.ActionType;\n    }\n    return type_validate_1.validate(action, utils_1.createActionValidator(actionType, getPayloadSchema(action.payload), true, false));\n}\nexports.validateAction = validateAction;\n"]},"metadata":{},"sourceType":"script"}
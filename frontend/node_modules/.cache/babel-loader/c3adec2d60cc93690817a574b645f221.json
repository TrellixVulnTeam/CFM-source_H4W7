{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Cart_1 = require(\"../../actions/Cart\");\n\nexports.ActionType = Cart_1.ActionType;\n\nvar type_validate_1 = require(\"../type-validate\");\n\nvar utils_1 = require(\"../utils\");\n\nvar addressSchema = type_validate_1.matchesObject({\n  address1: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  address2: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  city: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  company: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  firstName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  lastName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  phone: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  province: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  country: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  zip: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  name: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  provinceCode: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  countryCode: type_validate_1.makeOptional(type_validate_1.matchesString())\n});\nvar discountSchema = type_validate_1.matchesObject({\n  amount: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n  discountDescription: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  type: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  discountCode: type_validate_1.makeOptional(type_validate_1.matchesString())\n});\nvar discountAmount = type_validate_1.matchesObject({\n  amount: type_validate_1.matchesPositiveNumber(),\n  discountDescription: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  type: type_validate_1.makeOptional(type_validate_1.matchesString())\n});\nvar discountCode = type_validate_1.matchesObject({\n  discountCode: type_validate_1.matchesString()\n});\nvar lineItemSchema = type_validate_1.matchesObject({\n  price: type_validate_1.makeOptional(type_validate_1.matchesPositiveNumber()),\n  quantity: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n  title: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  variantId: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n  discount: type_validate_1.makeOptional(discountAmount)\n});\nvar updateLineItemSchema = type_validate_1.matchesObject({\n  quantity: type_validate_1.matchesPositiveInteger()\n});\nvar customerSchema = type_validate_1.matchesObject({\n  id: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n  email: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  firstName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  lastName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  note: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  addresses: type_validate_1.makeOptional(type_validate_1.matchesArray(addressSchema))\n});\nvar noteSchema = type_validate_1.matchesObject({\n  name: type_validate_1.matchesString(),\n  value: type_validate_1.matchesString()\n});\nvar cartSchema = type_validate_1.matchesObject({\n  cartDiscount: type_validate_1.makeOptional(discountSchema),\n  customer: type_validate_1.makeOptional(customerSchema),\n  grandTotal: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  lineItems: type_validate_1.makeOptional(type_validate_1.matchesArray(lineItemSchema)),\n  noteAttributes: type_validate_1.makeOptional(type_validate_1.matchesArray(noteSchema)),\n  subTotal: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  taxTotal: type_validate_1.makeOptional(type_validate_1.matchesString())\n});\nvar propertiesSchema = type_validate_1.composeSchemas(type_validate_1.matchesObject({}), function (value) {\n  var validator = type_validate_1.matchesString();\n  var schema = Object.keys(value).reduce(function (acc, key) {\n    acc[key] = validator;\n    return acc;\n  }, {});\n  return type_validate_1.validate(value, type_validate_1.matchesObject(schema));\n});\nvar matchesStringArray = type_validate_1.matchesArray(type_validate_1.matchesString());\n\nfunction createDataValidator(data) {\n  return utils_1.createActionValidator(Cart_1.ActionType, data ? type_validate_1.matchesObject({\n    data: data\n  }) : undefined, true, true);\n}\n\nfunction createDataValidatorWithIndex(data) {\n  var indexSchema = type_validate_1.matchesObject({\n    index: type_validate_1.matchesPositiveInteger()\n  });\n\n  if (data) {\n    var dataSchema = type_validate_1.matchesObject({\n      data: data\n    });\n    return utils_1.createActionValidator(Cart_1.ActionType, type_validate_1.composeSchemas(indexSchema, dataSchema), true, true);\n  }\n\n  return utils_1.createActionValidator(Cart_1.ActionType, indexSchema, true, true);\n}\n\nfunction getDiscountSchema(data) {\n  if (data.amount) {\n    return discountAmount;\n  }\n\n  return discountCode;\n}\n\nfunction validateAction(action) {\n  switch (action.type) {\n    case Cart_1.ActionType.UPDATE:\n      return type_validate_1.validate(action, createDataValidator(cartSchema));\n\n    case Cart_1.ActionType.SET_CUSTOMER:\n      return type_validate_1.validate(action, createDataValidator(customerSchema));\n\n    case Cart_1.ActionType.ADD_CUSTOMER_ADDRESS:\n      return type_validate_1.validate(action, createDataValidator(addressSchema));\n\n    case Cart_1.ActionType.UPDATE_CUSTOMER_ADDRESS:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(addressSchema));\n\n    case Cart_1.ActionType.SET_DISCOUNT:\n      return type_validate_1.validate(action, createDataValidator(getDiscountSchema(action.payload.data)));\n\n    case Cart_1.ActionType.SET_PROPERTIES:\n      return type_validate_1.validate(action, createDataValidator(propertiesSchema));\n\n    case Cart_1.ActionType.REMOVE_PROPERTIES:\n      return type_validate_1.validate(action, createDataValidator(matchesStringArray));\n\n    case Cart_1.ActionType.ADD_LINE_ITEM:\n      return type_validate_1.validate(action, createDataValidator(lineItemSchema));\n\n    case Cart_1.ActionType.UPDATE_LINE_ITEM:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(updateLineItemSchema));\n\n    case Cart_1.ActionType.REMOVE_LINE_ITEM:\n      return type_validate_1.validate(action, createDataValidatorWithIndex());\n\n    case Cart_1.ActionType.SET_LINE_ITEM_DISCOUNT:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(discountAmount));\n\n    case Cart_1.ActionType.REMOVE_LINE_ITEM_DISCOUNT:\n      return type_validate_1.validate(action, createDataValidatorWithIndex());\n\n    case Cart_1.ActionType.SET_LINE_ITEM_PROPERTIES:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(propertiesSchema));\n\n    case Cart_1.ActionType.REMOVE_LINE_ITEM_PROPERTIES:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(matchesStringArray));\n\n    case Cart_1.ActionType.FETCH:\n    case Cart_1.ActionType.REMOVE_CUSTOMER:\n    case Cart_1.ActionType.REMOVE_DISCOUNT:\n    case Cart_1.ActionType.CLEAR:\n    default:\n      return type_validate_1.validate(action, utils_1.createActionValidator(Cart_1.ActionType, undefined, false, true));\n  }\n}\n\nexports.validateAction = validateAction;","map":{"version":3,"sources":["/home/alex/Documents/Work/ccfe/frontend/node_modules/@shopify/app-bridge/validate/actions/cart.js"],"names":["Object","defineProperty","exports","value","Cart_1","require","ActionType","type_validate_1","utils_1","addressSchema","matchesObject","address1","makeOptional","matchesString","address2","city","company","firstName","lastName","phone","province","country","zip","name","provinceCode","countryCode","discountSchema","amount","matchesPositiveInteger","discountDescription","type","discountCode","discountAmount","matchesPositiveNumber","lineItemSchema","price","quantity","title","variantId","discount","updateLineItemSchema","customerSchema","id","email","note","addresses","matchesArray","noteSchema","cartSchema","cartDiscount","customer","grandTotal","lineItems","noteAttributes","subTotal","taxTotal","propertiesSchema","composeSchemas","validator","schema","keys","reduce","acc","key","validate","matchesStringArray","createDataValidator","data","createActionValidator","undefined","createDataValidatorWithIndex","indexSchema","index","dataSchema","getDiscountSchema","validateAction","action","UPDATE","SET_CUSTOMER","ADD_CUSTOMER_ADDRESS","UPDATE_CUSTOMER_ADDRESS","SET_DISCOUNT","payload","SET_PROPERTIES","REMOVE_PROPERTIES","ADD_LINE_ITEM","UPDATE_LINE_ITEM","REMOVE_LINE_ITEM","SET_LINE_ITEM_DISCOUNT","REMOVE_LINE_ITEM_DISCOUNT","SET_LINE_ITEM_PROPERTIES","REMOVE_LINE_ITEM_PROPERTIES","FETCH","REMOVE_CUSTOMER","REMOVE_DISCOUNT","CLEAR"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Cart_1 = require(\"../../actions/Cart\");\nexports.ActionType = Cart_1.ActionType;\nvar type_validate_1 = require(\"../type-validate\");\nvar utils_1 = require(\"../utils\");\nvar addressSchema = type_validate_1.matchesObject({\n    address1: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    address2: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    city: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    company: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    firstName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    lastName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    phone: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    province: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    country: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    zip: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    name: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    provinceCode: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    countryCode: type_validate_1.makeOptional(type_validate_1.matchesString()),\n});\nvar discountSchema = type_validate_1.matchesObject({\n    amount: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n    discountDescription: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    type: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    discountCode: type_validate_1.makeOptional(type_validate_1.matchesString()),\n});\nvar discountAmount = type_validate_1.matchesObject({\n    amount: type_validate_1.matchesPositiveNumber(),\n    discountDescription: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    type: type_validate_1.makeOptional(type_validate_1.matchesString()),\n});\nvar discountCode = type_validate_1.matchesObject({\n    discountCode: type_validate_1.matchesString(),\n});\nvar lineItemSchema = type_validate_1.matchesObject({\n    price: type_validate_1.makeOptional(type_validate_1.matchesPositiveNumber()),\n    quantity: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n    title: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    variantId: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n    discount: type_validate_1.makeOptional(discountAmount),\n});\nvar updateLineItemSchema = type_validate_1.matchesObject({\n    quantity: type_validate_1.matchesPositiveInteger(),\n});\nvar customerSchema = type_validate_1.matchesObject({\n    id: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n    email: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    firstName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    lastName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    note: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    addresses: type_validate_1.makeOptional(type_validate_1.matchesArray(addressSchema)),\n});\nvar noteSchema = type_validate_1.matchesObject({\n    name: type_validate_1.matchesString(),\n    value: type_validate_1.matchesString(),\n});\nvar cartSchema = type_validate_1.matchesObject({\n    cartDiscount: type_validate_1.makeOptional(discountSchema),\n    customer: type_validate_1.makeOptional(customerSchema),\n    grandTotal: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    lineItems: type_validate_1.makeOptional(type_validate_1.matchesArray(lineItemSchema)),\n    noteAttributes: type_validate_1.makeOptional(type_validate_1.matchesArray(noteSchema)),\n    subTotal: type_validate_1.makeOptional(type_validate_1.matchesString()),\n    taxTotal: type_validate_1.makeOptional(type_validate_1.matchesString()),\n});\nvar propertiesSchema = type_validate_1.composeSchemas(type_validate_1.matchesObject({}), function (value) {\n    var validator = type_validate_1.matchesString();\n    var schema = Object.keys(value).reduce(function (acc, key) {\n        acc[key] = validator;\n        return acc;\n    }, {});\n    return type_validate_1.validate(value, type_validate_1.matchesObject(schema));\n});\nvar matchesStringArray = type_validate_1.matchesArray(type_validate_1.matchesString());\nfunction createDataValidator(data) {\n    return utils_1.createActionValidator(Cart_1.ActionType, data ? type_validate_1.matchesObject({ data: data }) : undefined, true, true);\n}\nfunction createDataValidatorWithIndex(data) {\n    var indexSchema = type_validate_1.matchesObject({ index: type_validate_1.matchesPositiveInteger() });\n    if (data) {\n        var dataSchema = type_validate_1.matchesObject({ data: data });\n        return utils_1.createActionValidator(Cart_1.ActionType, type_validate_1.composeSchemas(indexSchema, dataSchema), true, true);\n    }\n    return utils_1.createActionValidator(Cart_1.ActionType, indexSchema, true, true);\n}\nfunction getDiscountSchema(data) {\n    if (data.amount) {\n        return discountAmount;\n    }\n    return discountCode;\n}\nfunction validateAction(action) {\n    switch (action.type) {\n        case Cart_1.ActionType.UPDATE:\n            return type_validate_1.validate(action, createDataValidator(cartSchema));\n        case Cart_1.ActionType.SET_CUSTOMER:\n            return type_validate_1.validate(action, createDataValidator(customerSchema));\n        case Cart_1.ActionType.ADD_CUSTOMER_ADDRESS:\n            return type_validate_1.validate(action, createDataValidator(addressSchema));\n        case Cart_1.ActionType.UPDATE_CUSTOMER_ADDRESS:\n            return type_validate_1.validate(action, createDataValidatorWithIndex(addressSchema));\n        case Cart_1.ActionType.SET_DISCOUNT:\n            return type_validate_1.validate(action, createDataValidator(getDiscountSchema(action.payload.data)));\n        case Cart_1.ActionType.SET_PROPERTIES:\n            return type_validate_1.validate(action, createDataValidator(propertiesSchema));\n        case Cart_1.ActionType.REMOVE_PROPERTIES:\n            return type_validate_1.validate(action, createDataValidator(matchesStringArray));\n        case Cart_1.ActionType.ADD_LINE_ITEM:\n            return type_validate_1.validate(action, createDataValidator(lineItemSchema));\n        case Cart_1.ActionType.UPDATE_LINE_ITEM:\n            return type_validate_1.validate(action, createDataValidatorWithIndex(updateLineItemSchema));\n        case Cart_1.ActionType.REMOVE_LINE_ITEM:\n            return type_validate_1.validate(action, createDataValidatorWithIndex());\n        case Cart_1.ActionType.SET_LINE_ITEM_DISCOUNT:\n            return type_validate_1.validate(action, createDataValidatorWithIndex(discountAmount));\n        case Cart_1.ActionType.REMOVE_LINE_ITEM_DISCOUNT:\n            return type_validate_1.validate(action, createDataValidatorWithIndex());\n        case Cart_1.ActionType.SET_LINE_ITEM_PROPERTIES:\n            return type_validate_1.validate(action, createDataValidatorWithIndex(propertiesSchema));\n        case Cart_1.ActionType.REMOVE_LINE_ITEM_PROPERTIES:\n            return type_validate_1.validate(action, createDataValidatorWithIndex(matchesStringArray));\n        case Cart_1.ActionType.FETCH:\n        case Cart_1.ActionType.REMOVE_CUSTOMER:\n        case Cart_1.ActionType.REMOVE_DISCOUNT:\n        case Cart_1.ActionType.CLEAR:\n        default:\n            return type_validate_1.validate(action, utils_1.createActionValidator(Cart_1.ActionType, undefined, false, true));\n    }\n}\nexports.validateAction = validateAction;\n"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"var _jsxFileName = \"/home/alex/Documents/Work/ccfe/frontend/src/components/Login.js\";\nimport { Component } from 'react';\nimport { Link, NavLink, withRouter, useHistory } from \"react-router-dom\";\nimport store from \"../store/index\";\nimport { addUser } from \"../actions/index\";\nimport { browserHistory, Redirect } from 'react-router';\nimport React, { useState } from \"react\";\nimport { Button, FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\nimport \"./Login.css\";\nimport sha256 from 'js-sha256';\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport userPic from \"./user.png\";\nimport { HOST } from \"../constants/host.js\";\nimport { ADMIN_EMAIL } from '../constants/admin_email'; //const HOST = \"https://cfm.mipt.ru:8443\"  // \"http://127.0.0.1:40001\" \n\nfunction Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordAgain, setPasswordAgain] = useState(\"\");\n  const [userName, setUserName] = useState(\"\");\n  const [mode, setMode] = useState(false);\n  const [ratedProtocols, setRatedProtocols] = useState(Array());\n  const [loggedIn, logIn] = useState(Cookies.get(\"userName\") ? true : false);\n  const [queried, setQueried] = useState(false);\n  const names = [\"Reproducibility\", \"Detalization depth\", \"Functional maturity of cells\"];\n\n  function validateLoginForm() {\n    return userName.length > 0 && password.length > 0;\n  }\n\n  function validateAddForm() {\n    return email.length > 0 && userName.length > 0 && password.length > 0 && passwordAgain.length > 0 && password == passwordAgain;\n  }\n\n  function handleRequestRatedProtocols() {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': \"*\"\n      }\n    };\n    const params = {\n      userName: Cookies.get(\"userName\"),\n      access_token: Cookies.get(\"access_token\")\n    };\n    axios.put(HOST + \"/api/getRatedProtocols\", params, config).then(function (response) {\n      if (response.data.response[0] == 'Authentification failed') {\n        alert('Authentification failed while trying to request rated protocols, please contact ' + ADMIN_EMAIL);\n      } else if (response.data.response[0] == \"User not found in database\") {\n        alert('User not found in database while trying to request rated protocols, please contact ' + ADMIN_EMAIL);\n      } else if (response.data.response[0] == \"Database error\") {\n        alert('Database error occupied while trying to request rated protocols, please contact ' + ADMIN_EMAIL);\n      } else if (response.status == 200) {\n        setRatedProtocols(response.data.response);\n        console.log(\"REQUESTED RATES\", response);\n      }\n    }).catch(function (error) {\n      console.log(\"RATES ERROR\", error);\n    });\n  }\n\n  function handleSubmitLogin(event) {\n    event.preventDefault();\n    console.log(event);\n    const params = {\n      request: {\n        login: userName,\n        password: sha256(sha256(password).concat(password))\n      }\n    };\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': \"*\"\n      }\n    }; //\"https://cfm.mipt.ru:8443\"\n    // http://127.0.0.1:40001\n\n    axios.put(HOST + \"/api/login/\" + userName, params, config).then(response => {\n      console.log(\"RESPONSE\", response.data.response);\n\n      if (response.data.response == \"User not found!\") {\n        alert(\"You are not registered yet!\");\n        setMode(true);\n      } else {\n        Cookies.set(\"access_token\", response.data.response[0]);\n        Cookies.set(\"userName\", userName);\n        logIn(true);\n        alert(\"Authentificated successfully!\");\n      }\n    }).catch(function (error) {\n      console.log(\"ERROR\", error);\n    });\n  }\n\n  function handleLogOut() {\n    console.log(\"Logging out...\");\n    const params = {\n      request: {\n        login: userName,\n        access_token: Cookies.get(\"access_token\")\n      }\n    };\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': \"*\"\n      }\n    }; //\"https://cfm.mipt.ru:8443\"\n    // \"http://127.0.0.1:40001\"\n\n    axios.put(HOST + \"/api/logout/\", params, config).then(response => {\n      console.log(\"RESPONSE\", response);\n\n      if (response.data.response[0] == \"User exists!\") {\n        alert(\"User exists!\");\n      } else if (response.data.response[0] == \"Unknown error ocupied\") {\n        alert(\"Unknown error ocupied\");\n      } else {\n        alert(\"Logged out successfully!\");\n        Cookies.remove(\"userName\");\n        Cookies.remove(\"access_token\");\n        logIn(false);\n      }\n    }).catch(function (error) {\n      console.log(\"ERROR\", error);\n    });\n  }\n\n  function handleSubmitRegister(event) {\n    event.preventDefault();\n    console.log(event);\n    const params = {\n      request: {\n        login: userName,\n        email: email,\n        password: sha256(sha256(password).concat(password))\n      }\n    };\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': \"*\"\n      }\n    }; //https://cfm.mipt.ru:8443\n    // http://127.0.0.1:40001\n\n    axios.put(HOST + \"/api/addUser/\" + userName, params, config).then(response => {\n      console.log(\"RESPONSE\", response.data.response);\n\n      if (response.data.response[0] == \"User exists!\") {\n        alert(\"User exists!\");\n      } else if (response.data.response[0] == \"Undefined server-side error ocupied!\") {\n        alert(\"Undefined server-side error ocupied!\");\n      } else if (response.data.status == \"OK\") {\n        alert(\"Registered successfully!\");\n        Cookies.set(\"userName\", userName);\n        Cookies.set(\"access_token\", response.data.response[0]);\n        logIn(true);\n      }\n    }).catch(function (error) {\n      console.log(\"ERROR\", error);\n    });\n  }\n\n  if (loggedIn) {\n    if (!queried) {\n      handleRequestRatedProtocols();\n      setQueried(true);\n    }\n\n    console.log(\"Logged in!\");\n    return React.createElement(\"div\", {\n      className: \"container LoggedIn \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row userPic center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"figure\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: userPic,\n      height: \"200px\",\n      wifth: \"100px\",\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Logged in as \\xA0 \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \" \", Cookies.get(\"userName\"), \" \"), \". \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row LogButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => handleLogOut(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Log out\")), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Rated protocols\")), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-hover table-bordered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Protocol\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Ratings\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, ratedProtocols.length > 0 && ratedProtocols.map((response_basic, i) => {\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '/viewProtocol/' + response_basic[\"protocolId\"],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Protocol \", response_basic[\"protocolId\"])), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \" \", React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, response_basic.rates.map((rate, k) => {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, names[k]), \"  \", React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, rate), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }));\n      }))));\n    })))));\n  } else if (mode == false) {\n    return React.createElement(\"div\", {\n      className: \"container Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"row center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: handleSubmitLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      controlId: \"email\",\n      bsSize: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(FormLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \" \", React.createElement(\"font\", {\n      size: \"+1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \" User Name \")), React.createElement(FormControl, {\n      autoFocus: true,\n      type: \"login\",\n      value: userName,\n      onChange: e => setUserName(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      controlId: \"password\",\n      bsSize: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(FormLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \" \", React.createElement(\"font\", {\n      size: \"+1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \" Password \")), React.createElement(FormControl, {\n      value: password,\n      onChange: e => setPassword(e.target.value),\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    })), React.createElement(Button, {\n      block: true,\n      bsSize: \"large\",\n      disabled: !validateLoginForm(),\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"Login\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => setMode(true),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"Don`t have an account yet?\")));\n  } else if (mode == true) {\n    return React.createElement(\"div\", {\n      className: \" container Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, \" Login \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: handleSubmitRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      controlId: \"username\",\n      bsSize: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, React.createElement(FormLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, \" \", React.createElement(\"font\", {\n      size: \"+1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, \" User Name \")), React.createElement(FormControl, {\n      value: userName,\n      onChange: e => setUserName(e.target.value),\n      type: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      controlId: \"email\",\n      bsSize: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(FormLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \" \", React.createElement(\"font\", {\n      size: \"+1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \" Email \")), React.createElement(FormControl, {\n      autoFocus: true,\n      type: \"email\",\n      value: email,\n      onChange: e => setEmail(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      controlId: \"password\",\n      bsSize: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(FormLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, \" \", React.createElement(\"font\", {\n      size: \"+1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, \" Password \")), React.createElement(FormControl, {\n      value: password,\n      onChange: e => setPassword(e.target.value),\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      controlId: \"password_again\",\n      bsSize: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, React.createElement(FormLabel, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, \" \", React.createElement(\"font\", {\n      size: \"+1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, \" Type password again\")), React.createElement(FormControl, {\n      value: passwordAgain,\n      onChange: e => setPasswordAgain(e.target.value),\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    })), React.createElement(Button, {\n      block: true,\n      bsSize: \"large\",\n      disabled: !validateAddForm(),\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, \"Register\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => setMode(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, \"Already have an account?\")));\n  }\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/home/alex/Documents/Work/ccfe/frontend/src/components/Login.js"],"names":["Component","Link","NavLink","withRouter","useHistory","store","addUser","browserHistory","Redirect","React","useState","Button","FormGroup","FormControl","FormLabel","sha256","axios","Cookies","userPic","HOST","ADMIN_EMAIL","Login","email","setEmail","password","setPassword","passwordAgain","setPasswordAgain","userName","setUserName","mode","setMode","ratedProtocols","setRatedProtocols","Array","loggedIn","logIn","get","queried","setQueried","names","validateLoginForm","length","validateAddForm","handleRequestRatedProtocols","config","headers","params","access_token","put","then","response","data","alert","status","console","log","catch","error","handleSubmitLogin","event","preventDefault","request","login","concat","set","handleLogOut","remove","handleSubmitRegister","map","response_basic","i","rates","rate","k","e","target","value"],"mappings":";AAAA,SAAQA,SAAR,QAAwB,OAAxB;AACA,SAAQC,IAAR,EAAcC,OAAd,EAAuBC,UAAvB,EAAmCC,UAAnC,QAAoD,kBAApD;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAAQC,OAAR,QAAsB,kBAAtB;AACA,SAASC,cAAT,EAAyBC,QAAzB,QAAyC,cAAzC;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,MAAT,EAAiBC,SAAjB,EAA4BC,WAA5B,EAAyCC,SAAzC,QAA0D,iBAA1D;AACA,OAAO,aAAP;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,SAAQC,IAAR,QAAmB,sBAAnB;AACA,SAASC,WAAT,QAA4B,0BAA5B,C,CACA;;AAEA,SAASC,KAAT,GAAiB;AACf,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACgB,aAAD,EAAgBC,gBAAhB,IAAoCjB,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACkB,QAAD,EAAWC,WAAX,IAA0BnB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACoB,IAAD,EAAOC,OAAP,IAAkBrB,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACsB,cAAD,EAAiBC,iBAAjB,IAAsCvB,QAAQ,CAACwB,KAAK,EAAN,CAApD;AACA,QAAM,CAACC,QAAD,EAAWC,KAAX,IAAoB1B,QAAQ,CAACO,OAAO,CAACoB,GAAR,CAAY,UAAZ,IAA0B,IAA1B,GAAgC,KAAjC,CAAlC;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwB7B,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM8B,KAAK,GAAG,CAAC,iBAAD,EAAoB,oBAApB,EAA0C,8BAA1C,CAAd;;AACA,WAASC,iBAAT,GAA6B;AAC3B,WAAOb,QAAQ,CAACc,MAAT,GAAkB,CAAlB,IAAuBlB,QAAQ,CAACkB,MAAT,GAAkB,CAAhD;AACD;;AACD,WAASC,eAAT,GAA2B;AACzB,WAAQrB,KAAK,CAACoB,MAAN,GAAe,CAAf,IAAoBd,QAAQ,CAACc,MAAT,GAAkB,CAAtC,IAA2ClB,QAAQ,CAACkB,MAAT,GAAkB,CAA7D,IAAkEhB,aAAa,CAACgB,MAAd,GAAuB,CAAzF,IAA8FlB,QAAQ,IAAIE,aAAlH;AACD;;AAED,WAASkB,2BAAT,GAAuC;AACrC,UAAMC,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AAAC,wBAAgB,kBAAjB;AACC,uCAA8B;AAD/B;AADI,KAAf;AAKA,UAAMC,MAAM,GAAG;AAEbnB,MAAAA,QAAQ,EAAEX,OAAO,CAACoB,GAAR,CAAY,UAAZ,CAFG;AAGbW,MAAAA,YAAY,EAAE/B,OAAO,CAACoB,GAAR,CAAY,cAAZ;AAHD,KAAf;AAQArB,IAAAA,KAAK,CAACiC,GAAN,CAAU9B,IAAI,GAAG,wBAAjB,EACA4B,MADA,EAEAF,MAFA,EAEQK,IAFR,CAEa,UAASC,QAAT,EAAmB;AAC9B,UAAIA,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,KAA6B,yBAAjC,EAA4D;AAC1DE,QAAAA,KAAK,CAAC,qFAAqFjC,WAAtF,CAAL;AACD,OAFD,MAEO,IAAI+B,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,KAA6B,4BAAjC,EAA+D;AACpEE,QAAAA,KAAK,CAAC,wFAAwFjC,WAAzF,CAAL;AACD,OAFM,MAEA,IAAI+B,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,KAA6B,gBAAjC,EAAmD;AACxDE,QAAAA,KAAK,CAAC,qFAAqFjC,WAAtF,CAAL;AACD,OAFM,MAEA,IAAI+B,QAAQ,CAACG,MAAT,IAAmB,GAAvB,EAA4B;AACnCrB,QAAAA,iBAAiB,CAACkB,QAAQ,CAACC,IAAT,CAAcD,QAAf,CAAjB;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BL,QAA/B;AACC;AAEF,KAdD,EAcGM,KAdH,CAcS,UAASC,KAAT,EAAgB;AACvBH,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BE,KAA3B;AACD,KAhBD;AAiBD;;AAED,WAASC,iBAAT,CAA2BC,KAA3B,EAAkC;AAChCA,IAAAA,KAAK,CAACC,cAAN;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AACA,UAAMb,MAAM,GAAG;AACXe,MAAAA,OAAO,EAAE;AACTC,QAAAA,KAAK,EAAEnC,QADE;AAETJ,QAAAA,QAAQ,EAAET,MAAM,CAACA,MAAM,CAACS,QAAD,CAAN,CAAiBwC,MAAjB,CAAwBxC,QAAxB,CAAD;AAFP;AADE,KAAf;AAMA,UAAMqB,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAE;AAAC,wBAAgB,kBAAjB;AACC,uCAA8B;AAD/B;AADE,KAAf,CATgC,CAahC;AACA;;AACA9B,IAAAA,KAAK,CAACiC,GAAN,CAAU9B,IAAI,GAAG,aAAP,GAAuBS,QAAjC,EACAmB,MADA,EAEAF,MAFA,EAGCK,IAHD,CAGOC,QAAD,IAAc;AAClBI,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBL,QAAQ,CAACC,IAAT,CAAcD,QAAtC;;AACA,UAAIA,QAAQ,CAACC,IAAT,CAAcD,QAAd,IAA0B,iBAA9B,EAAiD;AAC7CE,QAAAA,KAAK,CAAC,6BAAD,CAAL;AACAtB,QAAAA,OAAO,CAAC,IAAD,CAAP;AACH,OAHD,MAGO;AACHd,QAAAA,OAAO,CAACgD,GAAR,CAAY,cAAZ,EAA4Bd,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,CAA5B;AACAlC,QAAAA,OAAO,CAACgD,GAAR,CAAY,UAAZ,EAAwBrC,QAAxB;AACAQ,QAAAA,KAAK,CAAC,IAAD,CAAL;AACAiB,QAAAA,KAAK,CAAC,+BAAD,CAAL;AACH;AACF,KAdD,EAcGI,KAdH,CAcS,UAAUC,KAAV,EAAiB;AACxBH,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBE,KAArB;AACD,KAhBD;AAiBD;;AACD,WAASQ,YAAT,GAAwB;AACtBX,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,UAAMT,MAAM,GAAG;AACXe,MAAAA,OAAO,EAAE;AACTC,QAAAA,KAAK,EAAEnC,QADE;AAEToB,QAAAA,YAAY,EAAE/B,OAAO,CAACoB,GAAR,CAAY,cAAZ;AAFL;AADE,KAAf;AAMA,UAAMQ,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAE;AAAC,wBAAgB,kBAAjB;AACC,uCAA8B;AAD/B;AADE,KAAf,CARsB,CAYtB;AACA;;AACA9B,IAAAA,KAAK,CAACiC,GAAN,CAAU9B,IAAI,GAAG,cAAjB,EACA4B,MADA,EAEAF,MAFA,EAGCK,IAHD,CAGOC,QAAD,IAAc;AAClBI,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBL,QAAxB;;AACA,UAAIA,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,KAA6B,cAAjC,EAAiD;AAC7CE,QAAAA,KAAK,CAAC,cAAD,CAAL;AACH,OAFD,MAEO,IAAIF,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,KAA6B,uBAAjC,EAA0D;AAC7DE,QAAAA,KAAK,CAAC,uBAAD,CAAL;AACH,OAFM,MAEA;AACHA,QAAAA,KAAK,CAAC,0BAAD,CAAL;AACApC,QAAAA,OAAO,CAACkD,MAAR,CAAe,UAAf;AACAlD,QAAAA,OAAO,CAACkD,MAAR,CAAe,cAAf;AACA/B,QAAAA,KAAK,CAAC,KAAD,CAAL;AACH;AACF,KAfD,EAeGqB,KAfH,CAeS,UAAUC,KAAV,EAAiB;AACxBH,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBE,KAArB;AACD,KAjBD;AAoBD;;AAID,WAASU,oBAAT,CAA8BR,KAA9B,EAAqC;AACnCA,IAAAA,KAAK,CAACC,cAAN;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AACA,UAAMb,MAAM,GAAG;AACXe,MAAAA,OAAO,EAAE;AACTC,QAAAA,KAAK,EAAEnC,QADE;AAETN,QAAAA,KAAK,EAAEA,KAFE;AAGTE,QAAAA,QAAQ,EAAET,MAAM,CAACA,MAAM,CAACS,QAAD,CAAN,CAAiBwC,MAAjB,CAAwBxC,QAAxB,CAAD;AAHP;AADE,KAAf;AAOA,UAAMqB,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAE;AAAC,wBAAgB,kBAAjB;AACC,uCAA8B;AAD/B;AADE,KAAf,CAVmC,CAcnC;AACA;;AACA9B,IAAAA,KAAK,CAACiC,GAAN,CAAU9B,IAAI,GAAG,eAAP,GAAyBS,QAAnC,EACAmB,MADA,EAEAF,MAFA,EAGCK,IAHD,CAGOC,QAAD,IAAc;AAClBI,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBL,QAAQ,CAACC,IAAT,CAAcD,QAAtC;;AACA,UAAIA,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,KAA6B,cAAjC,EAAiD;AAC7CE,QAAAA,KAAK,CAAC,cAAD,CAAL;AACH,OAFD,MAEO,IAAIF,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,KAA6B,sCAAjC,EAAyE;AAC5EE,QAAAA,KAAK,CAAC,sCAAD,CAAL;AACH,OAFM,MAEA,IAAIF,QAAQ,CAACC,IAAT,CAAcE,MAAd,IAAwB,IAA5B,EAAiC;AACpCD,QAAAA,KAAK,CAAC,0BAAD,CAAL;AACApC,QAAAA,OAAO,CAACgD,GAAR,CAAY,UAAZ,EAAwBrC,QAAxB;AACAX,QAAAA,OAAO,CAACgD,GAAR,CAAY,cAAZ,EAA4Bd,QAAQ,CAACC,IAAT,CAAcD,QAAd,CAAuB,CAAvB,CAA5B;AACAf,QAAAA,KAAK,CAAC,IAAD,CAAL;AACH;AACF,KAfD,EAeGqB,KAfH,CAeS,UAAUC,KAAV,EAAiB;AACxBH,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBE,KAArB;AACD,KAjBD;AAmBD;;AACD,MAAIvB,QAAJ,EAAc;AACZ,QAAI,CAACG,OAAL,EAAc;AACZM,MAAAA,2BAA2B;AAC3BL,MAAAA,UAAU,CAAC,IAAD,CAAV;AACD;;AACDgB,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,WACA;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,EAGI;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,GAAG,EAAEtC,OAAV;AAAmB,MAAA,MAAM,EAAC,OAA1B;AAAkC,MAAA,KAAK,EAAC,OAAxC;AAAgD,MAAA,KAAK,EAAC,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADA,CAHJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,EASI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAUD,OAAO,CAACoB,GAAR,CAAY,UAAZ,CAAV,MAAzC,OATJ,EAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVJ,EAYI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA,oBAAC,MAAD;AAAS,MAAA,OAAO,EAAE,MAAM6B,YAAY,EAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFA,CAZJ,EAgBI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,CAhBJ,EAmBM;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEF;AAAO,MAAA,SAAS,EAAC,kCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADN,EAEM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFN,CADA,CADF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIAlC,cAAc,CAACU,MAAf,GAAwB,CAAzB,IACCV,cAAc,CAACqC,GAAf,CAAmB,CAACC,cAAD,EAAiBC,CAAjB,KAAuB;AAC1C,aAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAE,mBAAmBD,cAAc,CAAC,YAAD,CAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqEA,cAAc,CAAC,YAAD,CAAnF,CAAL,CADN,EAEM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAQA,cAAc,CAACE,KAAf,CAAqBH,GAArB,CAAyB,CAACI,IAAD,EAAOC,CAAP,KAAa;AACjD,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKlC,KAAK,CAACkC,CAAD,CAAV,CADD,QACsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKD,IAAL,CADtB,EAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFD,CAAP;AAGY,OAJD,CAAR,CAAL,CAFN,CAAR;AAaG,KAdH,CALA,CAPF,CAFE,CAnBN,CADA;AAyDE,GA/DJ,MAgEK,IAAI3C,IAAI,IAAI,KAAZ,EAAkB;AACvB,WACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAI,MAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADD,EAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFD,EAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHD,EAIE;AAAM,MAAA,QAAQ,EAAE6B,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,OAArB;AAA6B,MAAA,MAAM,EAAC,OAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY;AAAM,MAAA,IAAI,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAZ,CADF,EAEE,oBAAC,WAAD;AACE,MAAA,SAAS,MADX;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,KAAK,EAAE/B,QAHT;AAIE,MAAA,QAAQ,EAAE+C,CAAC,IAAI9C,WAAW,CAAC8C,CAAC,CAACC,MAAF,CAASC,KAAV,CAJ5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,EAUE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,UAArB;AAAgC,MAAA,MAAM,EAAC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY;AAAM,MAAA,IAAI,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAZ,CADF,EAEE,oBAAC,WAAD;AACE,MAAA,KAAK,EAAErD,QADT;AAEE,MAAA,QAAQ,EAAEmD,CAAC,IAAIlD,WAAW,CAACkD,CAAC,CAACC,MAAF,CAASC,KAAV,CAF5B;AAGE,MAAA,IAAI,EAAC,UAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAVF,EAkBE,oBAAC,MAAD;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,MAAM,EAAC,OAArB;AAA6B,MAAA,QAAQ,EAAE,CAACpC,iBAAiB,EAAzD;AAA6D,MAAA,IAAI,EAAC,QAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAlBF,CAJF,EA2BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3BF,EA4BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5BF,EA6BE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4B,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,MAAMV,OAAO,CAAC,IAAD,CAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAA5B,CA7BF,CADF;AAiCC,GAlCI,MAmCA,IAAID,IAAI,IAAI,IAAZ,EAAiB;AACpB,WACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADD,EAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFD,EAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHD,EAIE;AAAM,MAAA,QAAQ,EAAEsC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,UAArB;AAAgC,MAAA,MAAM,EAAC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY;AAAM,MAAA,IAAI,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAZ,CADJ,EAEI,oBAAC,WAAD;AACE,MAAA,KAAK,EAAExC,QADT;AAEE,MAAA,QAAQ,EAAE+C,CAAC,IAAI9C,WAAW,CAAC8C,CAAC,CAACC,MAAF,CAASC,KAAV,CAF5B;AAGE,MAAA,IAAI,EAAC,OAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADA,EASE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,OAArB;AAA6B,MAAA,MAAM,EAAC,OAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY;AAAM,MAAA,IAAI,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAZ,CADF,EAEE,oBAAC,WAAD;AACE,MAAA,SAAS,MADX;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,KAAK,EAAEvD,KAHT;AAIE,MAAA,QAAQ,EAAEqD,CAAC,IAAIpD,QAAQ,CAACoD,CAAC,CAACC,MAAF,CAASC,KAAV,CAJzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CATF,EAmBE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,UAArB;AAAgC,MAAA,MAAM,EAAC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY;AAAM,MAAA,IAAI,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAZ,CADF,EAEE,oBAAC,WAAD;AACE,MAAA,KAAK,EAAErD,QADT;AAEE,MAAA,QAAQ,EAAEmD,CAAC,IAAIlD,WAAW,CAACkD,CAAC,CAACC,MAAF,CAASC,KAAV,CAF5B;AAGE,MAAA,IAAI,EAAC,UAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAnBF,EA2BE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,gBAArB;AAAsC,MAAA,MAAM,EAAC,OAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY;AAAM,MAAA,IAAI,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAZ,CADF,EAEE,oBAAC,WAAD;AACE,MAAA,KAAK,EAAEnD,aADT;AAEE,MAAA,QAAQ,EAAEiD,CAAC,IAAIhD,gBAAgB,CAACgD,CAAC,CAACC,MAAF,CAASC,KAAV,CAFjC;AAGE,MAAA,IAAI,EAAC,UAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CA3BF,EAoCE,oBAAC,MAAD;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,MAAM,EAAC,OAArB;AAA6B,MAAA,QAAQ,EAAE,CAAClC,eAAe,EAAvD;AAA2D,MAAA,IAAI,EAAC,QAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBApCF,CAJF,EA6CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7CF,EA8CI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,MAAMZ,OAAO,CAAC,KAAD,CAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,CA9CJ,CADJ;AAoDD;AACF;;AAED,eAAe5B,UAAU,CAACkB,KAAD,CAAzB","sourcesContent":["import {Component} from 'react';\nimport {Link, NavLink, withRouter, useHistory} from \"react-router-dom\"\nimport store from \"../store/index\"\nimport {addUser} from \"../actions/index\"\nimport { browserHistory, Redirect } from 'react-router';\nimport React, { useState } from \"react\";\nimport { Button, FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\nimport \"./Login.css\";\nimport sha256 from 'js-sha256';\nimport axios from \"axios\"\nimport Cookies from \"js-cookie\";\nimport userPic from \"./user.png\"\nimport {HOST} from \"../constants/host.js\"\nimport { ADMIN_EMAIL } from '../constants/admin_email';\n//const HOST = \"https://cfm.mipt.ru:8443\"  // \"http://127.0.0.1:40001\" \n\nfunction Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordAgain, setPasswordAgain] = useState(\"\");\n  const [userName, setUserName] = useState(\"\")\n  const [mode, setMode] = useState(false)\n  const [ratedProtocols, setRatedProtocols] = useState(Array())\n  const [loggedIn, logIn] = useState(Cookies.get(\"userName\") ? true: false)\n  const [queried, setQueried] = useState(false)   \n  const names = [\"Reproducibility\", \"Detalization depth\", \"Functional maturity of cells\"]\n  function validateLoginForm() {\n    return userName.length > 0 && password.length > 0;\n  }\n  function validateAddForm() {\n    return  email.length > 0 && userName.length > 0 && password.length > 0 && passwordAgain.length > 0 && password == passwordAgain;\n  }\n\n  function handleRequestRatedProtocols() {\n    const config = { \n      headers: {'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin':\"*\"} \n      };\n\n    const params = {\n\n      userName: Cookies.get(\"userName\"),\n      access_token: Cookies.get(\"access_token\")\n\n    \n  }\n\n    axios.put(HOST + \"/api/getRatedProtocols\", \n    params,\n    config).then(function(response) {\n      if (response.data.response[0] == 'Authentification failed') {\n        alert('Authentification failed while trying to request rated protocols, please contact ' + ADMIN_EMAIL)\n      } else if (response.data.response[0] == \"User not found in database\") {\n        alert('User not found in database while trying to request rated protocols, please contact ' + ADMIN_EMAIL)\n      } else if (response.data.response[0] == \"Database error\") {\n        alert('Database error occupied while trying to request rated protocols, please contact ' + ADMIN_EMAIL)\n      } else if (response.status == 200) {\n      setRatedProtocols(response.data.response)\n      console.log(\"REQUESTED RATES\", response)\n      }\n\n    }).catch(function(error) {\n      console.log(\"RATES ERROR\", error)\n    })\n  }\n\n  function handleSubmitLogin(event) {\n    event.preventDefault();\n    console.log(event);\n    const params = {\n        request: {\n        login: userName,\n        password: sha256(sha256(password).concat(password)) ,\n        }\n      }\n    const config = { \n        headers: {'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin':\"*\"} \n        };\n    //\"https://cfm.mipt.ru:8443\"\n    // http://127.0.0.1:40001\n    axios.put(HOST + \"/api/login/\" + userName, \n    params,\n    config)\n    .then((response) => {\n      console.log(\"RESPONSE\", response.data.response);\n      if (response.data.response == \"User not found!\") {\n          alert(\"You are not registered yet!\")\n          setMode(true)\n      } else {\n          Cookies.set(\"access_token\", response.data.response[0])\n          Cookies.set(\"userName\", userName)\n          logIn(true)\n          alert(\"Authentificated successfully!\")\n      }\n    }).catch(function (error) {\n      console.log(\"ERROR\", error);\n    })\n  }\n  function handleLogOut() {\n    console.log(\"Logging out...\")\n    const params = {\n        request: {\n        login: userName,\n        access_token: Cookies.get(\"access_token\")\n        }\n      }\n    const config = { \n        headers: {'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin':\"*\"} \n        };\n    //\"https://cfm.mipt.ru:8443\"\n    // \"http://127.0.0.1:40001\"\n    axios.put(HOST + \"/api/logout/\", \n    params,\n    config)\n    .then((response) => {\n      console.log(\"RESPONSE\", response);\n      if (response.data.response[0] == \"User exists!\") {\n          alert(\"User exists!\")\n      } else if (response.data.response[0] == \"Unknown error ocupied\") {\n          alert(\"Unknown error ocupied\")\n      } else {\n          alert(\"Logged out successfully!\")\n          Cookies.remove(\"userName\")\n          Cookies.remove(\"access_token\")\n          logIn(false)\n      } \n    }).catch(function (error) {\n      console.log(\"ERROR\", error);\n    })\n    \n    \n  }\n\n\n\n  function handleSubmitRegister(event) {\n    event.preventDefault();\n    console.log(event)\n    const params = {\n        request: {\n        login: userName,\n        email: email,\n        password: sha256(sha256(password).concat(password)) ,\n        }\n      }\n    const config = { \n        headers: {'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin':\"*\"} \n        };\n    //https://cfm.mipt.ru:8443\n    // http://127.0.0.1:40001\n    axios.put(HOST + \"/api/addUser/\" + userName, \n    params,\n    config)\n    .then((response) => {\n      console.log(\"RESPONSE\", response.data.response);\n      if (response.data.response[0] == \"User exists!\") {\n          alert(\"User exists!\")\n      } else if (response.data.response[0] == \"Undefined server-side error ocupied!\") {\n          alert(\"Undefined server-side error ocupied!\")\n      } else if (response.data.status == \"OK\"){\n          alert(\"Registered successfully!\")\n          Cookies.set(\"userName\", userName)\n          Cookies.set(\"access_token\", response.data.response[0])\n          logIn(true)\n      }\n    }).catch(function (error) {\n      console.log(\"ERROR\", error);\n    })\n\n  }\n  if (loggedIn) {\n    if (!queried) {\n      handleRequestRatedProtocols()\n      setQueried(true)\n    }\n    console.log(\"Logged in!\")\n    return (\n    <div className=\"container LoggedIn \">\n    <br></br>\n    <br></br>\n        <div className=\"row userPic center\">\n        <figure>\n            <img src={userPic} height=\"200px\" wifth=\"100px\" align=\"center\"/>\n        </figure>\n        </div>\n        <br/>\n        <div className=\"row\">Logged in as &nbsp; <strong> {Cookies.get(\"userName\")} </strong>. </div>\n        <br/>\n        \n        <div className=\"row LogButton\">\n        \n        <Button  onClick={() => handleLogOut() }>Log out</Button>\n        </div>\n        <div className=\"row\">\n          <h2>Rated protocols</h2>\n          </div>\n          <div className=\"row\">\n        {/* Here starts the block with rated protocols*/ }\n        <table className=\"table table-hover table-bordered\">\n          <thead>\n          <tr>\n                <th>Protocol</th>\n                <th>Ratings</th>\n            </tr>\n          </thead>\n          <tbody>\n\n\n          \n        {(ratedProtocols.length > 0) && \n          ratedProtocols.map((response_basic, i) => {\n          return (<tr>\n                        <td>{<Link to={'/viewProtocol/' + response_basic[\"protocolId\"]}>Protocol {response_basic[\"protocolId\"]}</Link>}</td>\n                        <td> <table>{response_basic.rates.map((rate, k) => {\n                          return <tr>\n                                  <td>{names[k]}</td>  <td>{rate}</td>\n                                  <br></br>\n                                </tr>})\n                        }\n                        </table>\n                        </td> \n                </tr>)\n            \n              \n            })\n            \n            \n          } \n        </tbody>\n        </table>\n        \n        </div>\n    </div>\n    )}\n  else if( mode == false){\n  return (\n    <div className=\"container Login\">\n     <h2 className=\"row center\">Login</h2>\n     <br/>\n     <br/>\n      <form onSubmit={handleSubmitLogin}>\n        <FormGroup controlId=\"email\" bsSize=\"large\">\n          <FormLabel> <font size=\"+1\"> User Name </font></FormLabel>\n          <FormControl\n            autoFocus\n            type=\"login\"\n            value={userName}\n            onChange={e => setUserName(e.target.value)}\n          />\n        </FormGroup>\n        <FormGroup controlId=\"password\" bsSize=\"large\">\n          <FormLabel> <font size=\"+1\"> Password </font></FormLabel>\n          <FormControl\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            type=\"password\"\n          />\n        </FormGroup>\n        <Button block bsSize=\"large\" disabled={!validateLoginForm()} type=\"submit\">\n        Login\n          \n        </Button>\n      </form>\n      <br/>\n      <br/>\n      <div className=\"row center\"><Button onClick={() => setMode(true)}>Don`t have an account yet?</Button></div>\n    </div>\n  );\n  }\n  else if (mode == true){\n    return (\n        <div className=\" container Login\">\n         <h2 className=\"center\"> Login </h2>\n         <br/>\n         <br/>\n          <form onSubmit={handleSubmitRegister}>\n          <FormGroup controlId=\"username\" bsSize=\"large\">\n              <FormLabel> <font size=\"+1\"> User Name </font></FormLabel>\n              <FormControl\n                value={userName}\n                onChange={e => setUserName(e.target.value)}\n                type=\"login\"\n              />\n            </FormGroup>\n            <FormGroup controlId=\"email\" bsSize=\"large\">\n              <FormLabel> <font size=\"+1\"> Email </font></FormLabel>\n              <FormControl\n                autoFocus\n                type=\"email\"\n                value={email}\n                onChange={e => setEmail(e.target.value)}\n              />\n            </FormGroup>\n           \n            <FormGroup controlId=\"password\" bsSize=\"large\">\n              <FormLabel> <font size=\"+1\"> Password </font></FormLabel>\n              <FormControl\n                value={password}\n                onChange={e => setPassword(e.target.value)}\n                type=\"password\"\n              />\n            </FormGroup>\n            <FormGroup controlId=\"password_again\" bsSize=\"large\">\n              <FormLabel> <font size=\"+1\"> Type password again</font></FormLabel>\n              <FormControl\n                value={passwordAgain}\n                onChange={e => setPasswordAgain(e.target.value)}\n                type=\"password\"\n              />\n            </FormGroup>\n            \n            <Button block bsSize=\"large\" disabled={!validateAddForm()} type=\"submit\">\n            Register\n              \n            </Button>\n          </form>\n          <br/>\n            <div className=\"row center\">\n              <Button onClick={() => setMode(false)}>Already have an account?</Button>\n            </div>\n        </div>\n      );\n  }\n}\n\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar constants_1 = require(\"./constants\");\n\nvar types_1 = require(\"../client/types\");\n\nvar helper_1 = require(\"./helper\");\n/**\n * Predicate to determine if an action is an App Bridge action.\n * @public\n */\n\n\nfunction isAppBridgeAction(action) {\n  return action instanceof Object && action.hasOwnProperty('type') && action.type.toString().startsWith(constants_1.PREFIX);\n}\n\nexports.isAppBridgeAction = isAppBridgeAction;\n/**\n * Predicate to determine if an action originated from an application.\n * @internal\n */\n\nfunction isFromApp(action) {\n  if (typeof action !== 'object' || typeof action.source !== 'object') {\n    return false;\n  }\n\n  return typeof action.source.apiKey === 'string';\n}\n\nexports.isFromApp = isFromApp;\n/**\n * Returns the action type without the prefix and group\n * @internal\n */\n\nfunction getPermissionKey(type) {\n  return type.replace(new RegExp(\"^\" + constants_1.PREFIX + constants_1.SEPARATOR + \"\\\\w+\" + constants_1.SEPARATOR), '');\n}\n\nexports.getPermissionKey = getPermissionKey;\n/**\n * Predicate to determine if an action is permitted\n * @internal\n */\n\nfunction isPermitted(features, _a, permissionType) {\n  var group = _a.group,\n      type = _a.type;\n\n  if (!group || !features.hasOwnProperty(group)) {\n    return false;\n  }\n\n  var feature = features[group];\n\n  if (!feature) {\n    return false;\n  }\n\n  var actionType = getPermissionKey(type);\n  return feature[actionType] ? feature[actionType][permissionType] === true : false;\n}\n\nexports.isPermitted = isPermitted;\n/**\n * Predicate to determine if an event originated from an application.\n * @internal\n */\n\nfunction isAppMessage(event) {\n  if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\n    return false;\n  }\n\n  var data = event.data;\n  return data.hasOwnProperty('type') && helper_1.findMatchInEnum(types_1.MessageType, data.type) !== undefined;\n}\n\nexports.isAppMessage = isAppMessage;","map":{"version":3,"sources":["/home/alex/Documents/Work/ccfe/frontend/node_modules/@shopify/app-bridge/actions/validator.js"],"names":["Object","defineProperty","exports","value","constants_1","require","types_1","helper_1","isAppBridgeAction","action","hasOwnProperty","type","toString","startsWith","PREFIX","isFromApp","source","apiKey","getPermissionKey","replace","RegExp","SEPARATOR","isPermitted","features","_a","permissionType","group","feature","actionType","isAppMessage","event","data","findMatchInEnum","MessageType","undefined"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,iBAAD,CAArB;;AACA,IAAIE,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAtB;AACA;;;;;;AAIA,SAASG,iBAAT,CAA2BC,MAA3B,EAAmC;AAC/B,SAAQA,MAAM,YAAYT,MAAlB,IACJS,MAAM,CAACC,cAAP,CAAsB,MAAtB,CADI,IAEJD,MAAM,CAACE,IAAP,CAAYC,QAAZ,GAAuBC,UAAvB,CAAkCT,WAAW,CAACU,MAA9C,CAFJ;AAGH;;AACDZ,OAAO,CAACM,iBAAR,GAA4BA,iBAA5B;AACA;;;;;AAIA,SAASO,SAAT,CAAmBN,MAAnB,EAA2B;AACvB,MAAI,OAAOA,MAAP,KAAkB,QAAlB,IAA8B,OAAOA,MAAM,CAACO,MAAd,KAAyB,QAA3D,EAAqE;AACjE,WAAO,KAAP;AACH;;AACD,SAAO,OAAOP,MAAM,CAACO,MAAP,CAAcC,MAArB,KAAgC,QAAvC;AACH;;AACDf,OAAO,CAACa,SAAR,GAAoBA,SAApB;AACA;;;;;AAIA,SAASG,gBAAT,CAA0BP,IAA1B,EAAgC;AAC5B,SAAOA,IAAI,CAACQ,OAAL,CAAa,IAAIC,MAAJ,CAAW,MAAMhB,WAAW,CAACU,MAAlB,GAA2BV,WAAW,CAACiB,SAAvC,GAAmD,MAAnD,GAA4DjB,WAAW,CAACiB,SAAnF,CAAb,EAA4G,EAA5G,CAAP;AACH;;AACDnB,OAAO,CAACgB,gBAAR,GAA2BA,gBAA3B;AACA;;;;;AAIA,SAASI,WAAT,CAAqBC,QAArB,EAA+BC,EAA/B,EAAmCC,cAAnC,EAAmD;AAC/C,MAAIC,KAAK,GAAGF,EAAE,CAACE,KAAf;AAAA,MAAsBf,IAAI,GAAGa,EAAE,CAACb,IAAhC;;AACA,MAAI,CAACe,KAAD,IAAU,CAACH,QAAQ,CAACb,cAAT,CAAwBgB,KAAxB,CAAf,EAA+C;AAC3C,WAAO,KAAP;AACH;;AACD,MAAIC,OAAO,GAAGJ,QAAQ,CAACG,KAAD,CAAtB;;AACA,MAAI,CAACC,OAAL,EAAc;AACV,WAAO,KAAP;AACH;;AACD,MAAIC,UAAU,GAAGV,gBAAgB,CAACP,IAAD,CAAjC;AACA,SAAOgB,OAAO,CAACC,UAAD,CAAP,GAAsBD,OAAO,CAACC,UAAD,CAAP,CAAoBH,cAApB,MAAwC,IAA9D,GAAqE,KAA5E;AACH;;AACDvB,OAAO,CAACoB,WAAR,GAAsBA,WAAtB;AACA;;;;;AAIA,SAASO,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,MAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,CAACA,KAAK,CAACC,IAApC,IAA4C,OAAOD,KAAK,CAACC,IAAb,KAAsB,QAAtE,EAAgF;AAC5E,WAAO,KAAP;AACH;;AACD,MAAIA,IAAI,GAAGD,KAAK,CAACC,IAAjB;AACA,SAAOA,IAAI,CAACrB,cAAL,CAAoB,MAApB,KAA+BH,QAAQ,CAACyB,eAAT,CAAyB1B,OAAO,CAAC2B,WAAjC,EAA8CF,IAAI,CAACpB,IAAnD,MAA6DuB,SAAnG;AACH;;AACDhC,OAAO,CAAC2B,YAAR,GAAuBA,YAAvB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constants_1 = require(\"./constants\");\nvar types_1 = require(\"../client/types\");\nvar helper_1 = require(\"./helper\");\n/**\n * Predicate to determine if an action is an App Bridge action.\n * @public\n */\nfunction isAppBridgeAction(action) {\n    return (action instanceof Object &&\n        action.hasOwnProperty('type') &&\n        action.type.toString().startsWith(constants_1.PREFIX));\n}\nexports.isAppBridgeAction = isAppBridgeAction;\n/**\n * Predicate to determine if an action originated from an application.\n * @internal\n */\nfunction isFromApp(action) {\n    if (typeof action !== 'object' || typeof action.source !== 'object') {\n        return false;\n    }\n    return typeof action.source.apiKey === 'string';\n}\nexports.isFromApp = isFromApp;\n/**\n * Returns the action type without the prefix and group\n * @internal\n */\nfunction getPermissionKey(type) {\n    return type.replace(new RegExp(\"^\" + constants_1.PREFIX + constants_1.SEPARATOR + \"\\\\w+\" + constants_1.SEPARATOR), '');\n}\nexports.getPermissionKey = getPermissionKey;\n/**\n * Predicate to determine if an action is permitted\n * @internal\n */\nfunction isPermitted(features, _a, permissionType) {\n    var group = _a.group, type = _a.type;\n    if (!group || !features.hasOwnProperty(group)) {\n        return false;\n    }\n    var feature = features[group];\n    if (!feature) {\n        return false;\n    }\n    var actionType = getPermissionKey(type);\n    return feature[actionType] ? feature[actionType][permissionType] === true : false;\n}\nexports.isPermitted = isPermitted;\n/**\n * Predicate to determine if an event originated from an application.\n * @internal\n */\nfunction isAppMessage(event) {\n    if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\n        return false;\n    }\n    var data = event.data;\n    return data.hasOwnProperty('type') && helper_1.findMatchInEnum(types_1.MessageType, data.type) !== undefined;\n}\nexports.isAppMessage = isAppMessage;\n"]},"metadata":{},"sourceType":"script"}